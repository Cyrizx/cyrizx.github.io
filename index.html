<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Visitas</title>
  <script type="module">
    // Importar Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

    // Tu configuración de Firebase
    const firebaseConfig = {

apiKey: "AIzaSyDNnEo_zDVOqCs7T9w6F1qGe2Q-fPdpEeE",

authDomain: "contadorvisitas-fd588.firebaseapp.com",

projectId: "contadorvisitas-fd588",

storageBucket: "contadorvisitas-fd588.appspot.com",

messagingSenderId: "276374859643",

appId: "1:276374859643:web:1b88b744d08056d16617de",

measurementId: "G-1G7MPMFWH2"

};



    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Función para obtener la ubicación del usuario
    // function obtenerUbicacion() {
    //   return new Promise((resolve, reject) => {
    //     if (navigator.geolocation) {
    //       navigator.geolocation.getCurrentPosition(resolve, reject);
    //     } else {
    //       reject(new Error("Geolocalización no soportada"));
    //     }
    //   });
    // }

    // Función para registrar la visita en Firestore
    async function registrarVisita() {
      try {
        // const ubicacion = await obtenerUbicacion();
        const userAgent = navigator.userAgent;
        const timestamp = new Date();

        // Añadir documento a Firestore
        await addDoc(collection(db, "visitas"), {
          dispositivo: userAgent,
          hora: timestamp
        });

        // Redirigir después de registrar la visita
        window.location.href = "https://wa.me/543834257342";
      } catch (error) {
        console.error("Error al registrar la visita:", error);
        // Redirigir aunque ocurra un error
        window.location.href = "https://wa.me/543834257342";
      }
    }

    // Ejecutar la función de registrar visita cuando se cargue la página
    registrarVisita();
  </script>
</head>

<body>
  <h1>Redirigiendo...</h1>
</body>

</html>